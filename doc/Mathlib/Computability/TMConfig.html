<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="icon" href="../.././favicon.svg"></link><link rel="mask-icon" href="../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Computability.TMConfig</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Computability.TMConfig";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Computability</span>.<span class="name">TMConfig</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Mathlib/Computability/Halting.html">Mathlib.Computability.Halting</a></li><li><a href="../.././Mathlib/Computability/PostTuringMachine.html">Mathlib.Computability.PostTuringMachine</a></li><li><a href="../.././Mathlib/Tactic/DeriveFintype.html">Mathlib.Tactic.DeriveFintype</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Computability.TMConfig" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.instDecidableEqCode"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instDecidableEqCode</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.instInhabitedCode"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instInhabitedCode</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.zero'_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">zero'_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.succ_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">succ_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.tail_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">tail_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.cons_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">cons_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.comp_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">comp_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.case_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">case_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.fix_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">fix_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.nil"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">nil</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.nil_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">nil_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.id"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">id</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.id_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">id_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.head"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">head</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.head_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">head_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.zero"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">zero</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.zero_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">zero_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.pred"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">pred</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.pred_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">pred_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.rfind"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">rfind</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.prec"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">prec</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.exists_code.comp"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">exists_code</span>.<span class="name">comp</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.exists_code"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">exists_code</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Cont"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.instInhabitedCont"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instInhabitedCont</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Cont.eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span>.<span class="name">eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Cfg"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cfg</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.instInhabitedCfg"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instInhabitedCfg</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepNormal"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepRet"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepRet</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.step"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">step</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Cont.then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span>.<span class="name">then</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Cont.then_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span>.<span class="name">then_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Cfg.then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cfg</span>.<span class="name">then</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepNormal_then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal_then</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepRet_then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepRet_then</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.Ok"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">Ok</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.Code.Ok.zero"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">Ok</span>.<span class="name">zero</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepNormal.is_ret"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal</span>.<span class="name">is_ret</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.cont_eval_fix"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">cont_eval_fix</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.code_is_ok"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">code_is_ok</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepNormal_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal_eval</span></a></div><div class="nav_link"><a class="break_within" href="#Turing.ToPartrec.stepRet_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepRet_eval</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Modelling-partial-recursive-functions-using-Turing-machines">Modelling partial recursive functions using Turing machines <a class="hover-link" href="#Modelling-partial-recursive-functions-using-Turing-machines">#</a></h1><p>The files <code>TMConfig</code> and <code>TMToPartrec</code> define a simplified basis for partial recursive functions,
and a <code>Turing.TM2</code> model
Turing machine for evaluating these functions. This amounts to a constructive proof that every
<code><a href="../.././Mathlib/Computability/Partrec.html#Partrec">Partrec</a></code> function can be evaluated by a Turing machine.</p><h2 class="markdown-heading" id="Main-definitions">Main definitions <a class="hover-link" href="#Main-definitions">#</a></h2><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">ToPartrec.Code</a></code>: a simplified basis for partial recursive functions, valued in
<code><a href="../.././Init/Prelude.html#List">List</a> ℕ →. <a href="../.././Init/Prelude.html#List">List</a> ℕ</code>.<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">ToPartrec.Code.eval</a></code>: semantics for a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">ToPartrec.Code</a></code> program</li>
</ul>
</li>
</ul></div><div class="mod_doc"><h2 class="markdown-heading" id="A-simplified-basis-for-partrec">A simplified basis for partrec <a class="hover-link" href="#A-simplified-basis-for-partrec">#</a></h2><p>This section constructs the type <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></code>, which is a data type of programs with <code><a href="../.././Init/Prelude.html#List">List</a> ℕ</code> input and
output, with enough expressivity to write any partial recursive function. The primitives are:</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">zero'</a></code> appends a <code>0</code> to the input. That is, <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">zero'</a> v = 0 :: v</code>.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a></code> returns the successor of the head of the input, defaulting to zero if there is no head:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a> [] = [1]</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a> (n :: v) = [n + 1]</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a></code> returns the tail of the input<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> [] = []</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> (n :: v) = v</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a> f fs</code> calls <code>f</code> and <code>fs</code> on the input and conses the results:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a> f fs v = (f v).<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a> :: fs v</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a> f g</code> calls <code>f</code> on the output of <code>g</code>:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a> f g v = f (g v)</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g</code> cases on the head of the input, calling <code>f</code> or <code>g</code> depending on whether it is zero or
a successor (similar to <code><a href="../.././Init/Prelude.html#Nat.casesOn">Nat.casesOn</a></code>).<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g [] = f []</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g (0 :: v) = f v</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g (n+1 :: v) = g (n :: v)</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f</code> calls <code>f</code> repeatedly, using the head of the result of <code>f</code> to decide whether to call <code>f</code>
again or finish:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = []</code> if <code>f v = []</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = w</code> if <code>f v = 0 :: w</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f w</code> if <code>f v = n+1 :: w</code> (the exact value of <code>n</code> is discarded)</li>
</ul>
</li>
</ul><p>This basis is convenient because it is closer to the Turing machine model - the key operations are
splitting and merging of lists of unknown length, while the messy <code>n</code>-ary composition operation
from the traditional basis for partial recursive functions is absent - but it retains a
compositional semantics. The first step in transitioning to Turing machines is to make a sequential
evaluator for this basis, which we take up in the next section.</p></div><div class="decl" id="Turing.ToPartrec.Code"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L71-L81">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>The type of codes for primitive recursive functions. Unlike <code><a href="../.././Mathlib/Computability/PartrecCode.html#Nat.Partrec.Code">Nat.Partrec.Code</a></code>, this uses a set
of operations on <code><a href="../.././Init/Prelude.html#List">List</a> ℕ</code>. See <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">Code.eval</a></code> for a description of the behavior of the primitives.</p><ul class="constructors"><li class="constructor" id="Turing.ToPartrec.Code.zero'">zero' : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></li><li class="constructor" id="Turing.ToPartrec.Code.succ">succ : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></li><li class="constructor" id="Turing.ToPartrec.Code.tail">tail : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></li><li class="constructor" id="Turing.ToPartrec.Code.cons">cons : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></span></li><li class="constructor" id="Turing.ToPartrec.Code.comp">comp : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></span></li><li class="constructor" id="Turing.ToPartrec.Code.case">case : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></span></li><li class="constructor" id="Turing.ToPartrec.Code.fix">fix : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></span></li></ul><details id="instances-for-list-Turing.ToPartrec.Code" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.instDecidableEqCode"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L81-L81">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instDecidableEqCode"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instDecidableEqCode</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#DecidableEq">DecidableEq</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instDecidableEqCode">Turing.ToPartrec.instDecidableEqCode</a> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Mathlib/Computability/TMConfig.html#_private.Mathlib.Computability.TMConfig.0.Turing.ToPartrec.decEqCode._@.Mathlib.Computability.TMConfig._hyg.83">Turing.ToPartrec.decEqCode✝</a></li></ul></details></div></div><div class="decl" id="Turing.ToPartrec.instInhabitedCode"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L81-L81">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instInhabitedCode"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instInhabitedCode</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instInhabitedCode">Turing.ToPartrec.instInhabitedCode</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">Turing.ToPartrec.Code.zero'</a> }</span></li></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.eval"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L83-L120">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">eval</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> <a href="../.././Mathlib/Data/PFun.html#PFun">→.</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span></span></div></div><p>The semantics of the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></code> primitives, as partial functions <code><a href="../.././Init/Prelude.html#List">List</a> ℕ →. <a href="../.././Init/Prelude.html#List">List</a> ℕ</code>. By convention
we functions that return a single result return a singleton <code>[n]</code>, or in some cases <code>n :: v</code> where
<code>v</code> will be ignored by a subsequent function.</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">zero'</a></code> appends a <code>0</code> to the input. That is, <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">zero'</a> v = 0 :: v</code>.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a></code> returns the successor of the head of the input, defaulting to zero if there is no head:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a> [] = [1]</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a> (n :: v) = [n + 1]</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a></code> returns the tail of the input<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> [] = []</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> (n :: v) = v</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a> f fs</code> calls <code>f</code> and <code>fs</code> on the input and conses the results:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a> f fs v = (f v).<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a> :: fs v</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a> f g</code> calls <code>f</code> on the output of <code>g</code>:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a> f g v = f (g v)</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g</code> cases on the head of the input, calling <code>f</code> or <code>g</code> depending on whether it is zero or
a successor (similar to <code><a href="../.././Init/Prelude.html#Nat.casesOn">Nat.casesOn</a></code>).<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g [] = f []</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g (0 :: v) = f v</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g (n+1 :: v) = g (n :: v)</code></li>
</ul>
</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f</code> calls <code>f</code> repeatedly, using the head of the result of <code>f</code> to decide whether to call <code>f</code>
again or finish:<ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = []</code> if <code>f v = []</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = w</code> if <code>f v = 0 :: w</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f w</code> if <code>f v = n+1 :: w</code> (the exact value of <code>n</code> is discarded)</li>
</ul>
</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">Turing.ToPartrec.Code.zero'</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn">0</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">v</span>)</span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">Turing.ToPartrec.Code.succ</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn"><span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span>.<a href="../.././Init/Prelude.html#Nat.succ">succ</a></span><a href="../.././Init/Prelude.html#List.cons">]</a></span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">Turing.ToPartrec.Code.tail</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <span class="fn">fs</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn">do
  let <span class="fn">n</span> ← <span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span>
  let <span class="fn">ns</span> ← <span class="fn"><span class="fn"><span class="fn">fs</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><span class="fn">n</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">ns</span>)</span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">g</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Bind.bind">&gt;&gt;=</a> <span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span></span></li><li class="equation"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a></span> <span class="fn">g</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Init/Prelude.html#Nat.rec">Nat.rec</a> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span>)</span> <span class="fn">(fun (<span class="fn">y</span> : <a href="../.././Init/Prelude.html#Nat">ℕ</a>) (<span class="fn">x</span> : <span class="fn"><a href="../.././Mathlib/Data/Part.html#Part">Part</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">g</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> (<span class="fn">y</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span>)</span>)</span> <span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span></span></span></li><li class="equation"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Data/PFun.html#PFun.fix">PFun.fix</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
    <span class="fn"><a href="../.././Mathlib/Data/Part.html#Part.map">Part.map</a> <span class="fn">(fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <a href="../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span> <a href="../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../.././Init/Core.html#Sum.inl">Sum.inl</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span> <a href="../.././Init/Prelude.html#ite">else</a> <span class="fn"><a href="../.././Init/Core.html#Sum.inr">Sum.inr</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span>)</span> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.eval" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.zero'_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L124-L125">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">zero'_eval</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">zero'</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn">0</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">v</span>)</span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.succ_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L127-L128">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">succ_eval</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn"><span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span>.<a href="../.././Init/Prelude.html#Nat.succ">succ</a></span><a href="../.././Init/Prelude.html#List.cons">]</a></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.tail_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L130-L131">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">tail_eval</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.cons_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L133-L137">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">cons_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">fs</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <span class="fn">fs</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn">do
  let <span class="fn">n</span> ← <span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span>
  let <span class="fn">ns</span> ← <span class="fn"><span class="fn"><span class="fn">fs</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span>
  <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><span class="fn">n</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">ns</span>)</span></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.comp_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L139-L140">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">comp_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span> <span class="fn">g</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">g</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Bind.bind">&gt;&gt;=</a> <span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.case_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L142-L145">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">case_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a></span> <span class="fn">g</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Init/Prelude.html#Nat.rec">Nat.rec</a> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span>)</span> <span class="fn">(fun (<span class="fn">y</span> : <a href="../.././Init/Prelude.html#Nat">ℕ</a>) (<span class="fn">x</span> : <span class="fn"><a href="../.././Mathlib/Data/Part.html#Part">Part</a> <span class="fn">(<a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">g</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> (<span class="fn">y</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span>)</span>)</span> <span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.fix_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L147-L151">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">fix_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Data/PFun.html#PFun.fix">PFun.fix</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
    <span class="fn"><a href="../.././Mathlib/Data/Part.html#Part.map">Part.map</a> <span class="fn">(fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <a href="../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span> <a href="../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../.././Init/Core.html#Sum.inl">Sum.inl</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span> <a href="../.././Init/Prelude.html#ite">else</a> <span class="fn"><a href="../.././Init/Core.html#Sum.inr">Sum.inr</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span>)</span> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span>)</span></span></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.nil"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L153-L155">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">nil</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil">nil</a></code> is the constant nil function: <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil">nil</a> v = []</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil">Turing.ToPartrec.Code.nil</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">Turing.ToPartrec.Code.tail</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">Turing.ToPartrec.Code.succ</a></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.nil" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.nil_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L157-L158">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">nil_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil">nil</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#List.nil">[</a><a href="../.././Init/Prelude.html#List.nil">]</a></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.id"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L160-L162">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.id"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">id</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Init/Prelude.html#id">id</a></code> is the identity function: <code><a href="../.././Init/Prelude.html#id">id</a> v = v</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.id">Turing.ToPartrec.Code.id</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">Turing.ToPartrec.Code.tail</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">Turing.ToPartrec.Code.zero'</a></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.id" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.id_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L164-L165">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.id_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">id_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.id">id</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">v</span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.head"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L167-L169">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">head</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a></code> gets the head of the input list: <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a> [] = [0]</code>, <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a> (n :: v) = [n]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">Turing.ToPartrec.Code.head</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.id">Turing.ToPartrec.Code.id</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil">Turing.ToPartrec.Code.nil</a></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.head" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.head_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L171-L172">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">head_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span><a href="../.././Init/Prelude.html#List.cons">]</a></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.zero"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L174-L176">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">zero</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero">zero</a></code> is the constant zero function: <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero">zero</a> v = [0]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero">Turing.ToPartrec.Code.zero</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">Turing.ToPartrec.Code.zero'</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.nil">Turing.ToPartrec.Code.nil</a></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.zero" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.zero_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L178-L179">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">zero_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero">zero</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn">0</span><a href="../.././Init/Prelude.html#List.cons">]</a></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.pred"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L181-L184">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">pred</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a></code> returns the predecessor of the head of the input:
<code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a> [] = [0]</code>, <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a> (0 :: v) = [0]</code>, <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a> (n+1 :: v) = [n]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">Turing.ToPartrec.Code.pred</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero">Turing.ToPartrec.Code.zero</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">Turing.ToPartrec.Code.head</a></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.pred" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.pred_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L186-L188">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">pred_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn"><span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span>.<a href="../.././Init/Prelude.html#Nat.pred">pred</a></span><a href="../.././Init/Prelude.html#List.cons">]</a></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.rfind"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L190-L202">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.rfind"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">rfind</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.rfind">rfind</a> f</code> performs the function of the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.rfind">rfind</a></code> primitive of partial recursive functions.
<code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.rfind">rfind</a> f v</code> returns the smallest <code>n</code> such that <code>(f (n :: v)).<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.head">head</a> = 0</code>.</p><p>It is implemented as:</p><pre><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.rfind">rfind</a> f v = <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a> (fix (fun (n::v) =&gt; f (n::v) :: n+1 :: v) (0 :: v))
</code></pre><p>The idea is that the initial state is <code>0 :: v</code>, and the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></code> keeps <code>n :: v</code> as its internal state;
it calls <code>f (n :: v)</code> as the exit test and <code>n+1 :: v</code> as the next state. At the end we get
<code>n+1 :: v</code> where <code>n</code> is the desired output, and <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">pred</a> (n+1 :: v) = [n]</code> returns the result.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.rfind">rfind</a></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.pred">Turing.ToPartrec.Code.pred</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span>
    <span class="fn">(<span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <span class="fn">(<span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">Turing.ToPartrec.Code.succ</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">Turing.ToPartrec.Code.tail</a>)</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">Turing.ToPartrec.Code.zero'</a>)</span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.rfind" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.prec"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L204-L233">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">prec</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">f </span><span class="fn">g</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></div></div><p><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g</code> implements the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a></code> (primitive recursion) operation of partial recursive
functions. <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g</code> evaluates as:</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g [] = [f []]</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g (0 :: v) = [f v]</code></li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g (n+1 :: v) = [g (n :: <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g (n :: v) :: v)]</code></li>
</ul><p>It is implemented as:</p><pre><code>G (a :: b :: IH :: v) = (b :: a+1 :: b-1 :: g (a :: IH :: v) :: v)
F (0 :: f_v :: v) = (f_v :: v)
F (n+1 :: f_v :: v) = (fix G (0 :: n :: f_v :: v)).tail.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a>
<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.prec">prec</a> f g (a :: v) = [(F (a :: f v :: v)).head]
</code></pre><p>Because <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></code> always evaluates its body at least once, we must special case the <code>0</code> case to avoid
calling <code>g</code> more times than necessary (which could be bad if <code>g</code> diverges). If the input is
<code>0 :: v</code>, then <code>F (0 :: f v :: v) = (f v :: v)</code> so we return <code>[f v]</code>. If the input is <code>n+1 :: v</code>,
we evaluate the function from the bottom up, with initial state <code>0 :: n :: f v :: v</code>. The first
number counts up, providing arguments for the applications to <code>g</code>, while the second number counts
down, providing the exit condition (this is the initial <code>b</code> in the return value of <code>G</code>, which is
stripped by <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></code>). After the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></code> is complete, the final state is <code>n :: 0 :: res :: v</code> where
<code>res</code> is the desired result, and the rest reduces this to <code>[res]</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.prec" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.exists_code.comp"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L237-L257">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.exists_code.comp"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">exists_code</span>.<span class="name">comp</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m </span><span class="fn">n</span> : <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f</span> : <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">n</span></span> <a href="../.././Mathlib/Data/PFun.html#PFun">→.</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">g</span> : <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Fin">Fin</a> <span class="fn">n</span></span> → <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">m</span></span> <a href="../.././Mathlib/Data/PFun.html#PFun">→.</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hf</span> : <span class="fn">∃ (<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>), <span class="fn">∀ (<span class="fn">v</span> : <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">n</span></span>), <span class="fn"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">↑<span class="fn">v</span></span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">v</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">hg</span> : <span class="fn">∀ (<span class="fn">i</span> : <span class="fn"><a href="../.././Init/Prelude.html#Fin">Fin</a> <span class="fn">n</span></span>), <span class="fn">∃ (<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>), <span class="fn">∀ (<span class="fn">v</span> : <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">m</span></span>), <span class="fn"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">↑<span class="fn">v</span></span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">g</span> <span class="fn">i</span> <span class="fn">v</span></span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>), <span class="fn">∀ (<span class="fn">v</span> : <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">m</span></span>), <span class="fn"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">↑<span class="fn">v</span></span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> (<span class="fn">(<a href="../.././Mathlib/Data/Vector/Basic.html#List.Vector.mOfFn">List.Vector.mOfFn</a> <span class="fn">fun (<span class="fn">i</span> : <span class="fn"><a href="../.././Init/Prelude.html#Fin">Fin</a> <span class="fn">n</span></span>) =&gt; <span class="fn"><span class="fn">g</span> <span class="fn">i</span> <span class="fn">v</span></span></span>)</span> <a href="../.././Init/Prelude.html#Bind.bind">&gt;&gt;=</a> <span class="fn">f</span>)</span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Code.exists_code"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L259-L365">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.exists_code"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">exists_code</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">n</span> : <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f</span> : <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">n</span></span> <a href="../.././Mathlib/Data/PFun.html#PFun">→.</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">hf</span> : <span class="fn"><a href="../.././Mathlib/Computability/Halting.html#Nat.Partrec'">Nat.Partrec'</a> <span class="fn">f</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>), <span class="fn">∀ (<span class="fn">v</span> : <span class="fn"><a href="../.././Mathlib/Data/Vector/Defs.html#List.Vector">List.Vector</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a> <span class="fn">n</span></span>), <span class="fn"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">↑<span class="fn">v</span></span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn">f</span> <span class="fn">v</span></span></span></span></div></div></div></div><div class="mod_doc"><h2 class="markdown-heading" id="From-compositional-semantics-to-sequential-semantics">From compositional semantics to sequential semantics <a class="hover-link" href="#From-compositional-semantics-to-sequential-semantics">#</a></h2><p>Our initial sequential model is designed to be as similar as possible to the compositional
semantics in terms of its primitives, but it is a sequential semantics, meaning that rather than
defining an <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a> c : <a href="../.././Init/Prelude.html#List">List</a> ℕ →. <a href="../.././Init/Prelude.html#List">List</a> ℕ</code> function for each program, defined by recursion on
programs, we have a type <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></code> with a step function <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a> → <a href="../.././Init/Prelude.html#Option">Option</a> cfg</code> that provides a
deterministic evaluation order. In order to do this, we introduce the notion of a <em>continuation</em>,
which can be viewed as a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></code> with a hole in it where evaluation is currently taking place.
Continuations can be assigned a <code><a href="../.././Init/Prelude.html#List">List</a> ℕ →. <a href="../.././Init/Prelude.html#List">List</a> ℕ</code> semantics as well, with the interpretation
being that given a <code><a href="../.././Init/Prelude.html#List">List</a> ℕ</code> result returned from the code in the hole, the remainder of the
program will evaluate to a <code><a href="../.././Init/Prelude.html#List">List</a> ℕ</code> final value.</p><p>The continuations are:</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">halt</a></code>: the empty continuation: the hole is the whole program, whatever is returned is the
final result. In our notation this is just <code>_</code>.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">cons₁</a> fs v k</code>: evaluating the first part of a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></code>, that is <code>k (_ :: fs v)</code>, where <code>k</code> is the
outer continuation.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">cons₂</a> ns k</code>: evaluating the second part of a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></code>: <code>k (ns.headI :: _)</code>. (Technically we don't
need to hold on to all of <code>ns</code> here since we are already committed to taking the head, but this
is more regular.)</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a> f k</code>: evaluating the first part of a composition: <code>k (f _)</code>.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f k</code>: waiting for the result of <code>f</code> in a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f</code> expression:
<code>k (if _.headI = 0 <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> _.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> else <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f (_.tail))</code></li>
</ul><p>The type <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></code> of evaluation states is:</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">ret</a> k v</code>: we have received a result, and are now evaluating the continuation <code>k</code> with result
<code>v</code>; that is, <code>k v</code> where <code>k</code> is ready to evaluate.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">halt</a> v</code>: we are done and the result is <code>v</code>.</li>
</ul><p>The main theorem of this section is that for each code <code>c</code>, the state <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> c <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">halt</a> v</code> steps
to <code>v'</code> in finitely many steps if and only if <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">Code.eval</a> c v = some v'</code>.</p></div><div class="decl" id="Turing.ToPartrec.Cont"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L406-L413">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>The type of continuations, built up during evaluation of a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></code> expression.</p><ul class="constructors"><li class="constructor" id="Turing.ToPartrec.Cont.halt">halt : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></li><li class="constructor" id="Turing.ToPartrec.Cont.cons₁">cons₁ : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> → <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></span></span></span></li><li class="constructor" id="Turing.ToPartrec.Cont.cons₂">cons₂ : <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> → <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></span></span></li><li class="constructor" id="Turing.ToPartrec.Cont.comp">comp : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></span></span></li><li class="constructor" id="Turing.ToPartrec.Cont.fix">fix : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></span></span></li></ul><details id="instances-for-list-Turing.ToPartrec.Cont" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.instInhabitedCont"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L413-L413">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instInhabitedCont"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instInhabitedCont</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instInhabitedCont">Turing.ToPartrec.instInhabitedCont</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Turing.ToPartrec.Cont.halt</a> }</span></li></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Cont.eval"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L415-L423">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span>.<span class="name">eval</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> <a href="../.././Mathlib/Data/PFun.html#PFun">→.</a> <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span></span></div></div><p>The semantics of a continuation.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Turing.ToPartrec.Cont.halt</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Pure.pure">pure</a></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Turing.ToPartrec.Cont.cons₁</a> <span class="fn">fs</span> <span class="fn">as</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn">do
  let <span class="fn">ns</span> ← <span class="fn"><span class="fn"><span class="fn">fs</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">as</span></span>
  <span class="fn"><span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> (<span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">ns</span>)</span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">Turing.ToPartrec.Cont.cons₂</a> <span class="fn">ns</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> (<span class="fn"><span class="fn">ns</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">v</span>)</span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Turing.ToPartrec.Cont.comp</a> <span class="fn">f</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt; <span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Bind.bind">&gt;&gt;=</a> <span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Turing.ToPartrec.Cont.fix</a> <span class="fn">f</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <a href="../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span> <a href="../.././Init/Prelude.html#ite">then</a> <span class="fn"><span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span> <a href="../.././Init/Prelude.html#ite">else</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span> <a href="../.././Init/Prelude.html#Bind.bind">&gt;&gt;=</a> <span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Cont.eval" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Cfg"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L425-L435">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cfg</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>The set of configurations of the machine:</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">halt</a> v</code>: The machine is about to stop and <code>v : <a href="../.././Init/Prelude.html#List">List</a> ℕ</code> is the result.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">ret</a> k v</code>: The machine is about to pass <code>v : <a href="../.././Init/Prelude.html#List">List</a> ℕ</code> to continuation <code>k : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></code>.</li>
</ul><p>We don't have a state corresponding to normal evaluation because these are evaluated immediately
to a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">ret</a></code> &quot;in zero steps&quot; using the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a></code> function.</p><ul class="constructors"><li class="constructor" id="Turing.ToPartrec.Cfg.halt">halt : <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></li><li class="constructor" id="Turing.ToPartrec.Cfg.ret">ret : <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></span></li></ul><details id="instances-for-list-Turing.ToPartrec.Cfg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.instInhabitedCfg"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L435-L435">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instInhabitedCfg"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">instInhabitedCfg</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.instInhabitedCfg">Turing.ToPartrec.instInhabitedCfg</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Turing.ToPartrec.Cfg.halt</a> <a href="../.././Init/Prelude.html#Inhabited.default">default</a></span> }</span></li></ul></details></div></div><div class="decl" id="Turing.ToPartrec.stepNormal"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L437-L462">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a> → <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></span></span></div></div><p>Evaluating <code>c : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a></code> in a continuation <code>k : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></code> and input <code>v : <a href="../.././Init/Prelude.html#List">List</a> ℕ</code>. This goes by
recursion on <code>c</code>, building an augmented continuation and a value to pass to it.</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">zero'</a> v = 0 :: v</code> evaluates immediately, so we return it to the parent continuation</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">succ</a> v = [v.headI.succ]</code> evaluates immediately, so we return it to the parent continuation</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> v = v.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a></code> evaluates immediately, so we return it to the parent continuation</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a> f fs v = (f v).headI :: fs v</code> requires two sub-evaluations, so we evaluate
<code>f v</code> in the continuation <code>k (_.headI :: fs v)</code> (called <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Cont.cons₁</a> fs v k</code>)</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a> f g v = f (g v)</code> requires two sub-evaluations, so we evaluate
<code>g v</code> in the continuation <code>k (f _)</code> (called <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Cont.comp</a> f k</code>)</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.case">case</a> f g v = v.head.casesOn (f v.tail) (fun n =&gt; g (n :: v.tail))</code> has the information needed
to evaluate the case statement, so we do that and transition to either
<code>f v</code> or <code>g (n :: v.tail)</code>.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v = let v' := f v; if v'.headI = 0 <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> k v'.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> else <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v'.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a></code>
needs to first evaluate <code>f v</code>, so we do that and leave the rest for the continuation (called
<code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Cont.fix</a> f k</code>)</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.zero'">Turing.ToPartrec.Code.zero'</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Turing.ToPartrec.Cfg.ret</a> <span class="fn">k</span> (<span class="fn">0</span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">v</span>)</span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.succ">Turing.ToPartrec.Code.succ</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Turing.ToPartrec.Cfg.ret</a> <span class="fn">k</span> <a href="../.././Init/Prelude.html#List.cons">[</a><span class="fn"><span class="fn"><span class="fn">v</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span>.<a href="../.././Init/Prelude.html#Nat.succ">succ</a></span><a href="../.././Init/Prelude.html#List.cons">]</a></span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">Turing.ToPartrec.Code.tail</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Turing.ToPartrec.Cfg.ret</a> <span class="fn">k</span> <span class="fn"><span class="fn">v</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.cons">cons</a></span> <span class="fn">fs</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">f</span> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Turing.ToPartrec.Cont.cons₁</a> <span class="fn">fs</span> <span class="fn">v</span> <span class="fn">k</span>)</span> <span class="fn">v</span></span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.comp">comp</a></span> <span class="fn">g</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">g</span> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Turing.ToPartrec.Cont.comp</a> <span class="fn">f</span> <span class="fn">k</span>)</span> <span class="fn">v</span></span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) (<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">f</span> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Turing.ToPartrec.Cont.fix</a> <span class="fn">f</span> <span class="fn">k</span>)</span> <span class="fn">v</span></span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.stepNormal" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.stepRet"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L464-L482">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepRet</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></span></div></div><p>Evaluating a continuation <code>k : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></code> on input <code>v : <a href="../.././Init/Prelude.html#List">List</a> ℕ</code>. This is the second part of
evaluation, when we receive results from continuations built by <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a></code>.</p><ul>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Cont.halt</a> v = v</code>, so we are done and transition to the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a> v</code> state</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Cont.cons₁</a> fs as k v = k (v.headI :: fs as)</code>, so we evaluate <code>fs as</code> now with the continuation
<code>k (v.headI :: _)</code> (called <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">cons₂</a> v k</code>).</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">Cont.cons₂</a> ns k v = k (ns.headI :: v)</code>, where we now have everything we need to evaluate
<code>ns.headI :: v</code>, so we return it to <code>k</code>.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Cont.comp</a> f k v = k (f v)</code>, so we call <code>f v</code> with <code>k</code> as the continuation.</li>
<li><code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Cont.fix</a> f k v = k (if v.headI = 0 <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> k v.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a> else <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v.tail)</code>, where <code>v</code> is a value,
so we evaluate the if statement and either call <code>k</code> with <code>v.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.tail">tail</a></code>, or call <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a> f v</code> with <code>k</code> as
the continuation (which immediately calls <code>f</code> with <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Cont.fix</a> f k</code> as the continuation).</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Turing.ToPartrec.Cont.halt</a> <span class="fn">x✝</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Turing.ToPartrec.Cfg.halt</a> <span class="fn">x✝</span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Turing.ToPartrec.Cont.cons₁</a> <span class="fn">fs</span> <span class="fn">as</span> <span class="fn">k</span>)</span> <span class="fn">x✝</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">fs</span> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">Turing.ToPartrec.Cont.cons₂</a> <span class="fn">x✝</span> <span class="fn">k</span>)</span> <span class="fn">as</span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">Turing.ToPartrec.Cont.cons₂</a> <span class="fn">ns</span> <span class="fn">k</span>)</span> <span class="fn">x✝</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">k</span> (<span class="fn"><span class="fn">ns</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#List.cons">::</a> <span class="fn">x✝</span>)</span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Turing.ToPartrec.Cont.comp</a> <span class="fn">f</span> <span class="fn">k</span>)</span> <span class="fn">x✝</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">f</span> <span class="fn">k</span> <span class="fn">x✝</span></span></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Turing.ToPartrec.Cont.fix</a> <span class="fn">f</span> <span class="fn">k</span>)</span> <span class="fn">x✝</span></span> <a href="../.././Init/Prelude.html#Eq">=</a>   <a href="../.././Init/Prelude.html#ite">if</a> <span class="fn"><span class="fn">x✝</span>.<a href="../.././Mathlib/Data/List/Defs.html#List.headI">headI</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span> <a href="../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">k</span> <span class="fn"><span class="fn">x✝</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span>
  <a href="../.././Init/Prelude.html#ite">else</a> <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">Turing.ToPartrec.stepNormal</a> <span class="fn">f</span> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Turing.ToPartrec.Cont.fix</a> <span class="fn">f</span> <span class="fn">k</span>)</span> <span class="fn"><span class="fn">x✝</span>.<a href="../.././Init/Data/List/Basic.html#List.tail">tail</a></span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.stepRet" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.step"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L484-L489">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">step</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a> → <span class="fn"><a href="../.././Init/Prelude.html#Option">Option</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></span></div></div><p>If we are not done (in <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a></code> state), then we must be still stuck on a continuation, so
this main loop calls <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">stepRet</a></code> with the new continuation. The overall <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a></code> function transitions
from one <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></code> to another, only halting at the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a></code> state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">Turing.ToPartrec.step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Turing.ToPartrec.Cfg.halt</a> <span class="fn">a</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Init/Prelude.html#Option.none">none</a></li><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">Turing.ToPartrec.step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Turing.ToPartrec.Cfg.ret</a> <span class="fn">k</span> <span class="fn">v</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#Option.some">some</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">k</span> <span class="fn">v</span>)</span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.step" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Cont.then"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L491-L508">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span>.<span class="name">then</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a></span></div></div><p>In order to extract a compositional semantics from the sequential execution behavior of
configurations, we observe that continuations have a monoid structure, with <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Cont.halt</a></code> as the unit
and <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">Cont.then</a></code> as the multiplication. <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">Cont.then</a> k₁ k₂</code> runs <code>k₁</code> until it halts, and then takes
the result of <code>k₁</code> and passes it to <code>k₂</code>.</p><p>We will not prove it is associative (although it is), but we are instead interested in the
associativity law <code>k₂ (eval c k₁) = <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a> c (k₁.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> k₂)</code>. This holds at both the sequential and
compositional levels, and allows us to express running a machine without the ambient continuation
and relate it to the original machine's evaluation steps. In the literature this is usually
where one uses Turing machines embedded inside other Turing machines, but this approach allows us
to avoid changing the ambient type <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></code> in the middle of the recursion.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Turing.ToPartrec.Cont.halt</a>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt; <span class="fn">k'</span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Turing.ToPartrec.Cont.cons₁</a> <span class="fn">fs</span> <span class="fn">as</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt;
  <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₁">Turing.ToPartrec.Cont.cons₁</a> <span class="fn">fs</span> <span class="fn">as</span> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">Turing.ToPartrec.Cont.cons₂</a> <span class="fn">ns</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt; <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.cons₂">Turing.ToPartrec.Cont.cons₂</a> <span class="fn">ns</span> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Turing.ToPartrec.Cont.comp</a> <span class="fn">f</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt; <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.comp">Turing.ToPartrec.Cont.comp</a> <span class="fn">f</span> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Turing.ToPartrec.Cont.fix</a> <span class="fn">f</span> <span class="fn">k</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt; <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Turing.ToPartrec.Cont.fix</a> <span class="fn">f</span> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span></span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Cont.then" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Cont.then_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L510-L518">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cont</span>.<span class="name">then_eval</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">k </span><span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Bind.bind">&gt;&gt;=</a> <span class="fn"><span class="fn">k'</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.Cfg.then"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L520-L525">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Cfg</span>.<span class="name">then</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a> → <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a> → <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg">Cfg</a></span></span></div></div><p>The <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> k</code> function is a &quot;configuration homomorphism&quot;. Its operation on states is to append
<code>k</code> to the continuation of a <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Cfg.ret</a></code> state, and to run <code>k</code> on <code>v</code> if we are in the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a> v</code>
state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Turing.ToPartrec.Cfg.halt</a> <span class="fn">a</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt; <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">Turing.ToPartrec.stepRet</a> <span class="fn">k'</span> <span class="fn">a</span></span></span></li><li class="equation"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Turing.ToPartrec.Cfg.ret</a> <span class="fn">k</span> <span class="fn">v</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.then">then</a></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">fun (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Turing.ToPartrec.Cont</a>) =&gt; <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Turing.ToPartrec.Cfg.ret</a> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span> <span class="fn">v</span></span></span></li></ul></details><details id="instances-for-list-Turing.ToPartrec.Cfg.then" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.stepNormal_then"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L527-L537">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal_then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal_then</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k </span><span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> <span class="fn">c</span> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> <span class="fn">c</span> <span class="fn">k</span> <span class="fn">v</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.then">then</a></span> <span class="fn">k'</span></span></div></div><p>The <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a></code> function respects the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> k'</code> homomorphism. Note that this is an exact
equality, not a simulation; the original and embedded machines move in lock-step until the
embedded machine reaches the halt state.</p></div></div><div class="decl" id="Turing.ToPartrec.stepRet_then"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L539-L554">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet_then"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepRet_then</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">k </span><span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">stepRet</a> <span class="fn">(<span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a></span> <span class="fn">k'</span>)</span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn"><span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">stepRet</a> <span class="fn">k</span> <span class="fn">v</span>)</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.then">then</a></span> <span class="fn">k'</span></span></div></div><p>The <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">stepRet</a></code> function respects the <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.then">then</a> k'</code> homomorphism. Note that this is an exact
equality, not a simulation; the original and embedded machines move in lock-step until the
embedded machine reaches the halt state.</p></div></div><div class="decl" id="Turing.ToPartrec.Code.Ok"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L556-L565">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.Ok"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">Ok</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Prop</a></div></div><p>This is a temporary definition, because we will prove in <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.code_is_ok">code_is_ok</a></code> that it always holds.
It asserts that <code>c</code> is semantically correct; that is, for any <code>k</code> and <code>v</code>,
<code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a> (stepNormal c k v) = <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a> (Cfg.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">ret</a> k (Code.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a> c v))</code>, as an equality of partial values
(so one diverges iff the other does).</p><p>In particular, we can let <code>k = <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Cont.halt</a></code>, and then this asserts that <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> c <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Cont.halt</a> v</code>
evaluates to <code><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a> (Code.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a> c v)</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Turing.ToPartrec.Code.Ok" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Turing.ToPartrec.Code.Ok.zero"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L567-L570">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.Ok.zero"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">Code</span>.<span class="name">Ok</span>.<span class="name">zero</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">h</span> : <span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.Ok">Ok</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/PostTuringMachine.html#Turing.eval">Turing.eval</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> <span class="fn">c</span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Cont.halt</a> <span class="fn">v</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.stepNormal.is_ret"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L572-L581">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal.is_ret"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal</span>.<span class="name">is_ret</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (<span class="fn">k'</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>) (<span class="fn">v'</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>), <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> <span class="fn">c</span> <span class="fn">k</span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Cfg.ret</a> <span class="fn">k'</span> <span class="fn">v'</span></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.cont_eval_fix"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L583-L653">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.cont_eval_fix"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">cont_eval_fix</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">f</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">fok</span> : <span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.Ok">Ok</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/PostTuringMachine.html#Turing.eval">eval</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> <span class="fn">f</span> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.fix">Cont.fix</a> <span class="fn">f</span> <span class="fn">k</span>)</span> <span class="fn">v</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let <span class="fn">v</span> ← <span class="fn"><span class="fn"><span class="fn"><span class="fn">f</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.fix">fix</a></span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span>
  <span class="fn"><a href="../.././Mathlib/Computability/PostTuringMachine.html#Turing.eval">eval</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.ret">Cfg.ret</a> <span class="fn">k</span> <span class="fn">v</span>)</span></span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.code_is_ok"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L655-L675">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.code_is_ok"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">code_is_ok</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.Ok">Ok</a></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.stepNormal_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L677-L678">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepNormal_eval</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">c</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code">Code</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/PostTuringMachine.html#Turing.eval">eval</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepNormal">stepNormal</a> <span class="fn">c</span> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.halt">Cont.halt</a> <span class="fn">v</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn"><span class="fn">c</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Code.eval">eval</a></span> <span class="fn">v</span></span></div></div></div></div><div class="decl" id="Turing.ToPartrec.stepRet_eval"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Computability/TMConfig.lean#L680-L703">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet_eval"><span class="name">Turing</span>.<span class="name">ToPartrec</span>.<span class="name">stepRet_eval</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">k</span> : <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont">Cont</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">v</span> : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <a href="../.././Init/Prelude.html#Nat">ℕ</a></span>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Computability/PostTuringMachine.html#Turing.eval">eval</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.step">step</a> <span class="fn">(<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.stepRet">stepRet</a> <span class="fn">k</span> <span class="fn">v</span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cfg.halt">Cfg.halt</a> <a href="../.././Init/Prelude.html#Functor.map">&lt;$&gt;</a> <span class="fn"><span class="fn"><span class="fn">k</span>.<a href="../.././Mathlib/Computability/TMConfig.html#Turing.ToPartrec.Cont.eval">eval</a></span> <span class="fn">v</span></span></div></div></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>