<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../../.././style.css"></link><link rel="icon" href="../../../.././favicon.svg"></link><link rel="mask-icon" href="../../../.././favicon.svg" color="#000000"></link><link rel="prefetch" href="../../../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Lean.Meta.RefinedDiscrTree.Encode</title><script defer="true" src="../../../.././mathjax-config.js"></script><script defer="true" src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../../.././";</script><script>const MODULE_NAME="Mathlib.Lean.Meta.RefinedDiscrTree.Encode";</script><script type="module" src="../../../.././jump-src.js"></script><script type="module" src="../../../.././search.js"></script><script type="module" src="../../../.././expand-nav.js"></script><script type="module" src="../../../.././how-about.js"></script><script type="module" src="../../../.././instances.js"></script><script type="module" src="../../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">Encode</span></h2><form id="search_form"><input type="text" name="q" autocomplete="off"></input>&#32;<button id="search_button" onclick="javascript: form.action='../../../.././search.html';">Search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../../.././Init.html">Init</a></li><li><a href="../../../.././Mathlib/Tactic/FunProp/StateList.html">Mathlib.Tactic.FunProp.StateList</a></li><li><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html">Mathlib.Lean.Meta.RefinedDiscrTree.Basic</a></li><li><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Pi.html">Mathlib.Lean.Meta.RefinedDiscrTree.Pi</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Lean.Meta.RefinedDiscrTree.Encode" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instInhabitedDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instBEqDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instReprDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instReprDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.instToFormatDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.size"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">size</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.eqv"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">eqv</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">eqv</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.goArray"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">eqv</span>.<span class="name">goArray</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.flatten"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">flatten</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.reduce"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">reduce</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.lambdaTelescopeReduce"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">lambdaTelescopeReduce</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.isStar"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStar</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.isStarWithArg"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStarWithArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVars"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">hasLooseBVars</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span>.<span class="name">isIgnoredArg</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprAux</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.instMonadCacheExprDTExprM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">instMonadCacheExprDTExprM</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">etaPossibilities</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">cacheEtaPossibilities</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprsAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprsAux</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.DTExpr.isSpecific"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">isSpecific</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.mkDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExpr</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Meta.RefinedDiscrTree.mkDTExprs"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExprs</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Encoding-an-Expr-as-a-sequence-of-Keys">Encoding an <code>Expr</code> as a sequence of <code>Key</code>s <a class="hover-link" href="#Encoding-an-Expr-as-a-sequence-of-Keys">#</a></h1></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L19-L42">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code> is a simplified form of <code>Expr</code>.
It is the intermediate step for converting from <code>Expr</code> to <code><a href="../../../.././Init/Prelude.html#Array">Array</a> Key</code>.</p><ul class="constructors"><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.star">star : <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Lean/Expr.html#Lean.MVarId">MVarId</a></span> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span><div class="inductive_ctor_doc"><p>A metavariable. It optionally stores an <code>MVarId</code>.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.opaque">opaque : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a><div class="inductive_ctor_doc"><p>An opaque variable or a let-expression in the case <code>WhnfCoreConfig.zeta := false</code>.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.const">const : <span class="fn"><a href="../../../.././Init/Prelude.html#Lean.Name">Name</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></span><div class="inductive_ctor_doc"><p>A constant. It stores the name and the arguments.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.fvar">fvar : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></span><div class="inductive_ctor_doc"><p>A free variable. It stores the <code>FVarId</code> and the arguments</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.bvar">bvar : <span class="fn"><a href="../../../.././Init/Prelude.html#Nat">ℕ</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></span><div class="inductive_ctor_doc"><p>A bound variable. It stores the De Bruijn index and the arguments</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.lit">lit : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Literal">Literal</a> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span><div class="inductive_ctor_doc"><p>A literal.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.sort">sort : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a><div class="inductive_ctor_doc"><p>A sort.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.lam">lam : <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span><div class="inductive_ctor_doc"><p>A lambda function. It stores the body.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.forall">forall : <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span><div class="inductive_ctor_doc"><p>A dependent arrow. It stores the domain and body.</p></div></li><li class="constructor" id="Lean.Meta.RefinedDiscrTree.DTExpr.proj">proj : <span class="fn"><a href="../../../.././Init/Prelude.html#Lean.Name">Name</a> → <span class="fn"><a href="../../../.././Init/Prelude.html#Nat">ℕ</a> → <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span> → <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></span></span></span><div class="inductive_ctor_doc"><p>A projection. It stores the structure name, projection index, struct body and arguments.</p></div></li></ul><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instInhabitedDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L42-L42">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instInhabitedDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instInhabitedDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instInhabitedDTExpr">Lean.Meta.RefinedDiscrTree.instInhabitedDTExpr</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.star">Lean.Meta.RefinedDiscrTree.DTExpr.star</a> <a href="../../../.././Init/Prelude.html#Inhabited.default">default</a></span> }</span></li></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instBEqDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L42-L42">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instBEqDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instBEqDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#BEq">BEq</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instBEqDTExpr">Lean.Meta.RefinedDiscrTree.instBEqDTExpr</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">beq</span> := <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.beqDTExpr._@.Mathlib.Lean.Meta.RefinedDiscrTree.Encode._hyg.181">Lean.Meta.RefinedDiscrTree.beqDTExpr✝</a> }</span></li></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instReprDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L42-L42">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instReprDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instReprDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instReprDTExpr">Lean.Meta.RefinedDiscrTree.instReprDTExpr</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.reprDTExpr._@.Mathlib.Lean.Meta.RefinedDiscrTree.Encode._hyg.638">Lean.Meta.RefinedDiscrTree.reprDTExpr✝</a> }</span></li></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.instToFormatDTExpr"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L62-L62">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instToFormatDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">instToFormatDTExpr</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Data/Format/Basic.html#Std.ToFormat">ToFormat</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.instToFormatDTExpr">Lean.Meta.RefinedDiscrTree.instToFormatDTExpr</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">format</span> := <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.DTExpr.format">Lean.Meta.RefinedDiscrTree.DTExpr.format✝</a> }</span></li></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.size"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L64-L74">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.size"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">size</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> → <a href="../../../.././Init/Prelude.html#Nat">ℕ</a></span></div></div><p>Return the size of the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>. This is used for calculating the matching score when two
expressions are equal.
The score is not incremented at a lambda, which is so that the expressions
<code>∀ x, p[x]</code> and <code>∃ x, p[x]</code> get the same size.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.eqv"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L76-L107">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">eqv</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">a </span><span class="fn">b</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Determine if two <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>s are equivalent.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">a</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv">eqv</a></span> <span class="fn">b</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Init/Control/State.html#StateT.run'">StateT.run'</a> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">a</span> <span class="fn">b</span>)</span> <a href="../../../.././Init/Core.html#EmptyCollection.emptyCollection">∅</a></span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr.eqv" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L81-L97">source</a></div><div class="attributes">@[irreducible]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">eqv</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">a </span><span class="fn">b</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Control/State.html#StateM">StateM</a> <span class="fn">(<a href="../../../.././Std/Data/HashMap/Basic.html#Std.HashMap">Std.HashMap</a> <a href="../../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> <a href="../../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.opaque">Lean.Meta.RefinedDiscrTree.DTExpr.opaque</a>
    <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.opaque">Lean.Meta.RefinedDiscrTree.DTExpr.opaque</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a></span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.lit">Lean.Meta.RefinedDiscrTree.DTExpr.lit</a> <span class="fn">li₁</span>)</span>
    <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.lit">Lean.Meta.RefinedDiscrTree.DTExpr.lit</a> <span class="fn">li₂</span>)</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn">li₁</span> <a href="../../../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn">li₂</span>)</span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.sort">Lean.Meta.RefinedDiscrTree.DTExpr.sort</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.sort">Lean.Meta.RefinedDiscrTree.DTExpr.sort</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a></span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn"><span class="fn">b₁</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.lam">lam</a></span> <span class="fn"><span class="fn">b₂</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.lam">lam</a></span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">b₁</span> <span class="fn">b₂</span></span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">(<span class="fn"><span class="fn">d₁</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.forall">forall</a></span> <span class="fn">b₁</span>)</span> <span class="fn">(<span class="fn"><span class="fn">d₂</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.forall">forall</a></span> <span class="fn">b₂</span>)</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   (<span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">d₁</span> <span class="fn">d₂</span></span> <a href="../../../.././Init/Control/Basic.html#andM">&lt;&amp;&amp;&gt;</a> <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">b₁</span> <span class="fn">b₂</span></span>)</li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.star">Lean.Meta.RefinedDiscrTree.DTExpr.star</a> <a href="../../../.././Init/Prelude.html#Option.none">none</a>)</span>
    <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.star">Lean.Meta.RefinedDiscrTree.DTExpr.star</a> <a href="../../../.././Init/Prelude.html#Option.none">none</a>)</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a></span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go">Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go</a> <span class="fn">a</span> <span class="fn">b</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Pure.pure">pure</a> <a href="../../../.././Init/Prelude.html#Bool.false">false</a></span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr.eqv.go" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.eqv.goArray"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L100-L107">source</a></div><div class="attributes">@[irreducible]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.eqv.goArray"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">eqv</span>.<span class="name">goArray</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">as </span><span class="fn">bs</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Control/State.html#StateM">StateM</a> <span class="fn">(<a href="../../../.././Std/Data/HashMap/Basic.html#Std.HashMap">Std.HashMap</a> <a href="../../../.././Lean/Expr.html#Lean.MVarId">MVarId</a> <a href="../../../.././Lean/Expr.html#Lean.MVarId">MVarId</a>)</span> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr.eqv.goArray" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h2 class="markdown-heading" id="Encoding-an-Expr">Encoding an Expr <a class="hover-link" href="#Encoding-an-Expr">#</a></h2></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.flatten"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L136-L139">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.flatten"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">flatten</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">initCapacity</span> : <a href="../../../.././Init/Prelude.html#Nat">ℕ</a> := <span class="fn">16</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Basic.html#Lean.Meta.RefinedDiscrTree.Key">Key</a></span></div></div><p>Given a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>, return the linearized encoding in terms of <code>Key</code>,
which is used for <code>RefinedDiscrTree</code> indexing.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><span class="fn">e</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.flatten">flatten</a></span> <span class="fn">initCapacity</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Init/Control/State.html#StateT.run'">StateT.run'</a> <span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.DTExpr.flattenAux">Lean.Meta.RefinedDiscrTree.DTExpr.flattenAux✝</a> <span class="fn">(<a href="../../../.././Init/Prelude.html#Array.mkEmpty">Array.mkEmpty</a> <span class="fn">initCapacity</span>)</span> <span class="fn">e</span>)</span> <span class="fn">{ }</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr.flatten" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.reduce"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L186-L193">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.reduce"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">reduce</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a></span></div></div><p>Reduction procedure for the <code>RefinedDiscrTree</code> indexing.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.lambdaTelescopeReduce"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L195-L204">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.lambdaTelescopeReduce"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">lambdaTelescopeReduce</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">m</span> : <span class="fn"><a href="../../../.././foundational_types.html">Type</a> → <a href="../../../.././foundational_types.html">Type</a> u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../.././Init/Prelude.html#MonadLiftT">MonadLiftT</a> <a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../.././Init/Control/Basic.html#MonadControlT">MonadControlT</a> <a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../.././Init/Prelude.html#Nonempty">Nonempty</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvars</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span> → <span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Repeatedly apply reduce while stripping lambda binders and introducing their variables</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.isStar"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L208-L212">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStar"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStar</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Check whether the expression is represented by <code>Key.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.star">star</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStar">Lean.Meta.RefinedDiscrTree.isStar</a> <span class="fn">(<a href="../../../.././Lean/Expr.html#Lean.Expr.mvar">Lean.Expr.mvar</a> <span class="fn">mvarId</span>)</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStar">Lean.Meta.RefinedDiscrTree.isStar</a> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../../../.././Lean/Expr.html#Lean.Expr.app">app</a></span> <span class="fn">arg</span>)</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStar">Lean.Meta.RefinedDiscrTree.isStar</a> <span class="fn">f</span></span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStar">Lean.Meta.RefinedDiscrTree.isStar</a> <span class="fn">x✝</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Bool.false">false</a></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.isStar" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.isStarWithArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L214-L217">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStarWithArg"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">isStarWithArg</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">arg</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Check whether the expression is represented by <code>Key.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.star">star</a></code> and has <code>arg</code> as an argument.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStarWithArg">Lean.Meta.RefinedDiscrTree.isStarWithArg</a> <span class="fn">arg</span> <span class="fn">(<span class="fn"><span class="fn">f</span>.<a href="../../../.././Lean/Expr.html#Lean.Expr.app">app</a></span> <span class="fn">a</span>)</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <a href="../../../.././Init/Prelude.html#ite">if</a> (<span class="fn">a</span> <a href="../../../.././Init/Prelude.html#BEq.beq">==</a> <span class="fn">arg</span>) <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../../.././Init/Prelude.html#ite">then</a> <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStar">Lean.Meta.RefinedDiscrTree.isStar</a> <span class="fn">f</span></span> <a href="../../../.././Init/Prelude.html#ite">else</a> <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStarWithArg">Lean.Meta.RefinedDiscrTree.isStarWithArg</a> <span class="fn">arg</span> <span class="fn">f</span></span></li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.isStarWithArg">Lean.Meta.RefinedDiscrTree.isStarWithArg</a> <span class="fn">arg</span> <span class="fn">x✝</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <a href="../../../.././Init/Prelude.html#Bool.false">false</a></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.isStarWithArg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVars"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L228-L230">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVars"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">hasLooseBVars</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Init/Prelude.html#Bool">Bool</a></div></div><p>Return <code>true</code> if <code>e</code> contains a loose bound variable.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">e</span>.<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVars">hasLooseBVars</a></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVarsAux">Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVarsAux✝</a> <span class="fn">0</span> <span class="fn">e</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr.hasLooseBVars" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L243-L265">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">fn</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">args</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Bool">Bool</a>)</span></span></div></div><p>Return for each argument whether it should be ignored.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L258-L265">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">getIgnores</span>.<span class="name">isIgnoredArg</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">arg </span><span class="fn">domain</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">binderInfo</span> : <a href="../../../.././Lean/Expr.html#Lean.BinderInfo">BinderInfo</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Return whether the argument should be ignored.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.MkDTExpr.getIgnores.isIgnoredArg" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L278-L352">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprAux</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">root</span> : <a href="../../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.Context">Lean.Meta.RefinedDiscrTree.MkDTExpr.Context✝</a> <a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><p>Return the encoding of <code>e</code> as a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>.
If <code>root = false</code>, then <code>e</code> is a strict sub expression of the original expression.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.instMonadCacheExprDTExprM"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L361-L369">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.instMonadCacheExprDTExprM"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">instMonadCacheExprDTExprM</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Util/MonadCache.html#Lean.MonadCache">MonadCache</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.M">Lean.Meta.RefinedDiscrTree.MkDTExpr.M✝</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L371-L383">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">etaPossibilities</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{<span class="fn">α</span> : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">lambdas</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span> → <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.M">Lean.Meta.RefinedDiscrTree.MkDTExpr.M✝</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.M">Lean.Meta.RefinedDiscrTree.MkDTExpr.M✝</a> <span class="fn">α</span></span></div></div><p>Return all pairs of body, bound variables that could possibly appear due to η-reduction</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities">Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities</a> <span class="fn">e</span> <span class="fn">lambdas</span> <span class="fn">k</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">(<span class="fn"><span class="fn">k</span> <span class="fn">e</span> <span class="fn">lambdas</span></span> &lt;|&gt; <a href="../../../.././Init/Control/Basic.html#Alternative.failure">failure</a>)</span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L385-L396">source</a></div><div class="attributes">@[specialize #[]]</div>
<div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">cacheEtaPossibilities</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e </span><span class="fn">original</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">lambdas</span> : <span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">k</span> : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a></span> → <span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.M">Lean.Meta.RefinedDiscrTree.MkDTExpr.M✝</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.M">Lean.Meta.RefinedDiscrTree.MkDTExpr.M✝</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><p>run <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.etaPossibilities">etaPossibilities</a></code>, and cache the result if there are multiple possibilities.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities">Lean.Meta.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities</a> <span class="fn">e</span> <span class="fn">original</span> <span class="fn">lambdas</span> <span class="fn">k</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">k</span> <span class="fn">e</span> <span class="fn">lambdas</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.MkDTExpr.cacheEtaPossibilities" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprsAux"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L399-L479">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprsAux"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">MkDTExpr</span>.<span class="name">mkDTExprsAux</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">original</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">root</span> : <a href="../../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#_private.Mathlib.Lean.Meta.RefinedDiscrTree.Encode.0.Lean.Meta.RefinedDiscrTree.MkDTExpr.M">Lean.Meta.RefinedDiscrTree.MkDTExpr.M✝</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><p>Return all encodings of <code>e</code> as a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>, taking possible η-reductions into account.
If <code>root = false</code>, then <code>e</code> is a strict sub expression of the original expression.</p></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.DTExpr.isSpecific"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L483-L487">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr.isSpecific"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">DTExpr</span>.<span class="name">isSpecific</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a> → <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Returns true if the <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code> is not of the form <code>*</code> or <code><a href="../../../.././Init/Prelude.html#Eq">Eq</a> * * *</code>&quot;.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.DTExpr.isSpecific" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.mkDTExpr"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L489-L498">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.mkDTExpr"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExpr</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarInContext</span> : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> → <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>) =&gt; <a href="../../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></span></div></div><p>Return the encoding of <code>e</code> as a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>.</p><p>Warning: to account for potential η-reductions of <code>e</code>, use <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.mkDTExprs">mkDTExprs</a></code> instead.</p><p>The argument <code>fvarInContext</code> allows you to specify which free variables in <code>e</code> will still be
in the context when the <code>RefinedDiscrTree</code> is being used for lookup.
It should return true only if the <code>RefinedDiscrTree</code> is built and used locally.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.mkDTExpr">Lean.Meta.RefinedDiscrTree.mkDTExpr</a> <span class="fn">e</span> <span class="fn">fvarInContext</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.withReducible">Lean.Meta.withReducible</a>
    <span class="fn">(<span class="fn"><span class="fn">(<a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprAux">Lean.Meta.RefinedDiscrTree.MkDTExpr.mkDTExprAux</a> <span class="fn">e</span> <a href="../../../.././Init/Prelude.html#Bool.true">true</a>)</span>.<a href="../../../.././Init/Prelude.html#ReaderT.run">run</a></span> <span class="fn">{ <span class="fn">fvarInContext</span> := <span class="fn">fvarInContext</span> }</span>)</span></span></li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.mkDTExpr" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Meta.RefinedDiscrTree.mkDTExprs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/0cc1f970691e01afdf9d8bb9f8307cd7b6aca12a/Mathlib/Lean/Meta/RefinedDiscrTree/Encode.lean#L500-L506">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.mkDTExprs"><span class="name">Lean</span>.<span class="name">Meta</span>.<span class="name">RefinedDiscrTree</span>.<span class="name">mkDTExprs</span></a></span><span class="decl_args">
<span class="fn">(<span class="fn">e</span> : <a href="../../../.././Lean/Expr.html#Lean.Expr">Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">onlySpecific</span> : <a href="../../../.././Init/Prelude.html#Bool">Bool</a>)</span></span>
<span class="decl_args">
<span class="fn">(<span class="fn">fvarInContext</span> : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a> → <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span> := <span class="fn">fun (<span class="fn">x</span> : <a href="../../../.././Lean/Expr.html#Lean.FVarId">FVarId</a>) =&gt; <a href="../../../.././Init/Prelude.html#Bool.false">false</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">MetaM</a> <span class="fn">(<a href="../../../.././Init/Prelude.html#List">List</a> <a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a>)</span></span></div></div><p>Similar to <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.mkDTExpr">mkDTExpr</a></code>.
Return all encodings of <code>e</code> as a <code><a href="../../../.././Mathlib/Lean/Meta/RefinedDiscrTree/Encode.html#Lean.Meta.RefinedDiscrTree.DTExpr">DTExpr</a></code>, taking potential further η-reductions into account.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Meta.RefinedDiscrTree.mkDTExprs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>