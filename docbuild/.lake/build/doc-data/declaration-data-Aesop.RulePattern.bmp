{"name":"Aesop.RulePattern","instances":[{"typeNames":["Aesop.RulePattern"],"name":"Aesop.instInhabitedRulePattern","className":"Inhabited"}],"imports":["Init","Aesop.Forward.Substitution","Aesop.RPINF","Aesop.Rule.Name","Aesop.Tracing","Aesop.Index.DiscrTreeConfig"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L121-L148","name":"Aesop.RulePattern.elab.abstractMVars'","line":121,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.elab.abstractMVars'","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.elab.abstractMVars'\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">elab</span>.<span class=\"name\">abstractMVars'</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">e</span> : <a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Meta/Basic.html#Lean.Meta.MetaM\">Lean.MetaM</a> (<a href=\"./Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult\">Lean.Meta.AbstractMVarsResult</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <span class=\"fn\"><a href=\"./Std/Data/HashMap/Basic.html#Std.HashMap\">Std.HashMap</a> <a href=\"./Lean/Expr.html#Lean.MVarId\">Lean.MVarId</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span> <a href=\"./Init/Prelude.html#Prod\">×</a> <span class=\"fn\"><a href=\"./Std/Data/HashMap/Basic.html#Std.HashMap\">Std.HashMap</a> <a href=\"./Lean/Level.html#Lean.LMVarId\">Lean.LMVarId</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span>)</span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L114-L118","name":"Aesop.RulePattern.elab.fvarsToMVars","line":114,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.elab.fvarsToMVars","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.elab.fvarsToMVars\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">elab</span>.<span class=\"name\">fvarsToMVars</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">fvars</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">e</span> : <a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Meta/Basic.html#Lean.Meta.MetaM\">Lean.MetaM</a> (<a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Expr.html#Lean.MVarId\">Lean.MVarId</a></span>)</span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L96-L148","name":"Aesop.RulePattern.elab","line":96,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.elab","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.elab\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">elab</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stx</span> : <a href=\"./Init/Meta.html#Lean.Syntax.Term\">Lean.Term</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">rule</span> : <a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Elab/Term.html#Lean.Elab.Term.TermElabM\">Lean.Elab.TermElabM</a> <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L73-L93","name":"Aesop.RulePattern.match","line":73,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.match","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.match\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">match</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">e</span> : <a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pat</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Aesop/BaseM.html#Aesop.BaseM\">BaseM</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Aesop/Forward/Substitution.html#Aesop.Substitution\">Substitution</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L65-L71","name":"Aesop.RulePattern.open","line":65,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.open","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.open\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">open</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pat</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Meta/Basic.html#Lean.Meta.MetaM\">Lean.MetaM</a> (<span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Expr.html#Lean.MVarId\">Lean.MVarId</a></span> <a href=\"./Init/Prelude.html#Prod\">×</a> <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Level.html#Lean.LMVarId\">Lean.LMVarId</a></span> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lean/Expr.html#Lean.Expr\">Lean.Expr</a>)</span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L57-L62","name":"Aesop.RulePattern.boundPremises","line":57,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.boundPremises","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.boundPremises\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">boundPremises</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pat</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L53-L53","name":"Aesop.instInhabitedRulePattern","line":53,"kind":"instance","docLink":"./Aesop/RulePattern.html#Aesop.instInhabitedRulePattern","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.instInhabitedRulePattern\"><span class=\"name\">Aesop</span>.<span class=\"name\">instInhabitedRulePattern</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Inhabited\">Inhabited</a> <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L52-L52","name":"Aesop.RulePattern.discrTreeKeys","line":52,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.discrTreeKeys","doc":"Discrimination tree keys for `p`.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.discrTreeKeys\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">discrTreeKeys</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Meta/DiscrTreeTypes.html#Lean.Meta.DiscrTree.Key\">Lean.Meta.DiscrTree.Key</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L48-L48","name":"Aesop.RulePattern.levelArgMap","line":48,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.levelArgMap","doc":"A partial map from the level metavariables occurring in the rule to the\npattern's level params.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.levelArgMap\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">levelArgMap</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L43-L43","name":"Aesop.RulePattern.argMap","line":43,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.argMap","doc":"A partial map from the index set `{0, ..., n-1}` into `{0, ..., k-1}`. If\n`argMap[i] = j`, this indicates that when matching against the rule type, the\ninstantiation `tⱼ` of `yⱼ` should be substituted for `xᵢ`.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.argMap\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">argMap</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L37-L37","name":"Aesop.RulePattern.pattern","line":37,"kind":"def","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.pattern","doc":"An expression of the form `λ y₀ ... yₖ, p` representing the\npattern.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.pattern\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">pattern</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult\">Lean.Meta.AbstractMVarsResult</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L32-L32","name":"Aesop.RulePattern.mk","line":32,"kind":"ctor","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern.mk\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">pattern</span> : <a href=\"./Lean/Meta/Basic.html#Lean.Meta.AbstractMVarsResult\">Lean.Meta.AbstractMVarsResult</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">argMap </span><span class=\"fn\">levelArgMap</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">discrTreeKeys</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Array\">Array</a> <a href=\"./Lean/Meta/DiscrTreeTypes.html#Lean.Meta.DiscrTree.Key\">Lean.Meta.DiscrTree.Key</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Aesop/RulePattern.html#Aesop.RulePattern\">RulePattern</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover-community/aesop/blob/57185dfad68d78356f9462af984882d6f262aa5d/Aesop/RulePattern.lean#L17-L53","name":"Aesop.RulePattern","line":17,"kind":"structure","docLink":"./Aesop/RulePattern.html#Aesop.RulePattern","doc":"A rule pattern. For a rule of type `∀ (x₀ : T₀) ... (xₙ : Tₙ), U`, a valid rule\npattern is an expression `p` such that `x₀ : T₁, ..., xₙ : Tₙ ⊢ p : P`. Let\n`y₀, ..., yₖ` be those variables `xᵢ` on which `p` depends. When `p` matches an\nexpression `e`, this means that `e` is defeq to `p` (where each `yᵢ` is replaced\nwith a metavariable) and we obtain a substitution\n\n    {y₀ ↦ t₀ : T₀, y₁ ↦ t₁ : T₁[x₀ := t₀], ...}\n\nNow suppose we want to match the above rule type against a type `V` (where `V`\nis the target for an `apply`-like rule and a hypothesis type for a\n`forward`-like rule). To that end, we take `U` and replace each `xᵢ` where\n`xᵢ = yⱼ` with `tⱼ` and each `xᵢ` with `xᵢ ≠ yⱼ ∀ j` with a metavariable. The\nresulting expression `U'` is then matched against `V`.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Aesop/RulePattern.html#Aesop.RulePattern\"><span class=\"name\">Aesop</span>.<span class=\"name\">RulePattern</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"}]}